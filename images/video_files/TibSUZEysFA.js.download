;/*FB_PKG_DELIM*/

__d("CometFeedStoryRenderLocationContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({storyRenderLocation:null});g["default"]=b}),98);
__d("CometFeedUnitIsFocusedStoryViewContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(!1);g["default"]=b}),98);
__d("CometFeedUnitStoryStrategy_feedUnit.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometFeedUnitStoryStrategy_feedUnit",selections:[{args:null,kind:"FragmentSpread",name:"CometFeedUnitStoryStrategyImpl_feedUnit"},{args:null,kind:"FragmentSpread",name:"GeminiFeedUnitStoryStrategyImpl_feedUnit"}],type:"Story",abstractKey:null};e.exports=a}),null);
__d("CometFeedUnitStoryStrategy.react",["CometFeedUnitStoryStrategy_feedUnit.graphql","CometRelay","cr:17197","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=h!==void 0?h:h=b("CometFeedUnitStoryStrategy_feedUnit.graphql");function a(a){var c=d("react-compiler-runtime").c(4),e=d("CometRelay").useFragment(k,a.feedUnit),f;c[0]!==e||c[1]!==a.position||c[2]!==a.variables?(f=j.jsx(b("cr:17197"),{feedUnit:e,position:a.position,variables:a.variables}),c[0]=e,c[1]=a.position,c[2]=a.variables,c[3]=f):f=c[3];return f}g["default"]=a}),98);
__d("react-relay/relay-hooks/legacy/FragmentResource",["invariant","Promise","react-relay/relay-hooks/LRUCache","react-relay/relay-hooks/QueryResource","react-relay/relay-hooks/SuspenseResource","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("react-relay/relay-hooks/QueryResource").getQueryResourceForEnvironment;d=(c=b("relay-runtime")).__internal;var j=d.fetchQuery,k=d.getPromiseForActiveRequest,l=c.RelayFeatureFlags,m=c.createOperationDescriptor,n=c.getFragmentIdentifier,o=c.getPendingOperationsForFragment,p=c.getSelector,q=c.getVariablesFromFragment,r=c.handlePotentialSnapshotErrors,s=c.isPromise,t=c.recycleNodesInto;f=typeof WeakMap==="function";var u=1e6,v=Object.freeze([]);function w(a){return Array.isArray(a)?a.some(function(a){return a.isMissingData}):a.isMissingData}function x(a){return Array.isArray(a)?a.some(function(a){return((a=(a=a.missingClientEdges)==null?void 0:a.length)!=null?a:0)>0}):((a=(a=a.missingClientEdges)==null?void 0:a.length)!=null?a:0)>0}function y(a){return Array.isArray(a)?a.map(function(a){return a.missingLiveResolverFields}).filter(Boolean).flat():a.missingLiveResolverFields}function z(a,b){Array.isArray(a)?a.forEach(b):b(a)}function A(a,b,c){return Array.isArray(b)?{cacheKey:a,snapshot:b,data:b.map(function(a){return a.data}),isMissingData:w(b),storeEpoch:c}:{cacheKey:a,snapshot:b,data:b.data,isMissingData:w(b),storeEpoch:c}}var B=function(){function a(a){this.$1=new Map(),this.$2=new Map(),this.$3=a}var c=a.prototype;c.get=function(a){return(a=(a=this.$1.get(a))==null?void 0:a[0])!=null?a:void 0};c.recordQueryResults=function(a,c){var d=this,e=this.$1.get(a);if(!e){var f=new(b("react-relay/relay-hooks/SuspenseResource"))(function(){return d.$4(a)});this.$1.set(a,[c,f]);f.temporaryRetain(this.$3)}else{var g=e[0];f=e[1];c.forEach(function(a){g.push(a)});f.temporaryRetain(this.$3)}};c.$4=function(a){var b,c=this;b=((b=this.$2.get(a))!=null?b:0)+1;this.$2.set(a,b);return{dispose:function(){var b;b=((b=c.$2.get(a))!=null?b:0)-1;b>0?c.$2.set(a,b):(c.$2["delete"](a),c.$1["delete"](a))}}};return a}(),C=function(){function a(a){this.$1=a,this.$2=b("react-relay/relay-hooks/LRUCache").create(u),this.$3=new B(a)}var c=a.prototype;c.read=function(a,b,c,d){return this.readWithIdentifier(a,b,n(a,b),c,d)};c.readWithIdentifier=function(a,c,d,e,f){var j,m=this,n,o=this.$1;if(c==null)return{cacheKey:d,data:null,isMissingData:!1,snapshot:null,storeEpoch:0};var q=o.getStore().getEpoch();if((a==null||(j=a.metadata)==null?void 0:j.plural)===!0){Array.isArray(c)||g(0,13793,f!=null?" for key `"+f+"`":"",a.name,typeof c,a.name);if(c.length===0)return{cacheKey:d,data:v,isMissingData:!1,snapshot:v,storeEpoch:q}}var r=this.$2.get(d);if(r!=null){var t;if(r.kind==="pending"&&s(r.promise)){o.__log({name:"suspense.fragment",data:r.result.data,fragment:a,isRelayHooks:!0,isMissingData:r.result.isMissingData,isPromiseCached:!0,pendingOperations:r.pendingOperations});throw r.promise}if(r.kind==="done"&&r.result.snapshot&&!((t=y(r.result.snapshot))!=null&&t.length)){this.$4(r.result.snapshot);r.result.isMissingData&&o.__log({name:"fragmentresource.missing_data",data:r.result.data,fragment:a,isRelayHooks:!0,cached:!0});return r.result}}t=p(a,c);t!=null||g(0,98573,a.name,a.name,e,a.name,f==null?"a fragment reference":"the `"+f+"`",e,a.name);f=null;e=null;l.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE&&r!=null&&r.kind==="missing"?(f=r.result,e=r.snapshot):(e=t.kind==="PluralReaderSelector"?t.selectors.map(function(a){return o.lookup(a)}):o.lookup(t),f=A(d,e,q));if(!f.isMissingData){this.$4(e);this.$2.set(d,{kind:"done",result:f});return f}var u=null;if(((r=a.metadata)==null?void 0:r.hasClientEdges)===!0&&x(e)){u=[];var w=i(this.$1),B=[];z(e,function(b){(b=b.missingClientEdges)==null||b.forEach(function(b){var d=b.request;b=b.clientEdgeDestinationID;d=m.$5(w,a,c,d,b);b=d.queryResult;d=d.requestDescriptor;B.push(b);(b=u)==null||b.push(d)})});this.$3!=null||g(0,56147);this.$3.recordQueryResults(d,B)}r=[];u&&(r=u.map(function(a){return k(m.$1,a)}).filter(Boolean));t=t.kind==="PluralReaderSelector"?t.selectors[0].owner:t.owner;t=this.$6(d,a,t,f);var C=t==null?void 0:t.promise;n=(n=(n=y(e))==null?void 0:n.map(function(a){var b=o.getStore();return b.getLiveResolverPromise(a)}))!=null?n:[];if(r.length||n.length||s(C)){o.__log({name:"suspense.fragment",data:f.data,fragment:a,isRelayHooks:!0,isPromiseCached:!1,isMissingData:f.isMissingData,pendingOperations:[].concat((t=t==null?void 0:t.pendingOperations)!=null?t:[],u!=null?u:[])});t=[];r.length>0&&(t=t.concat(r));n.length>0&&(t=t.concat(n));if(t.length>0){C&&t.push(C);throw(h||(h=b("Promise"))).all(t)}if(C)throw C}l.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE&&f.isMissingData&&this.$2.set(d,{kind:"done",result:f});this.$4(e);o.__log({name:"fragmentresource.missing_data",data:f.data,fragment:a,isRelayHooks:!0,cached:!1});return A(d,e,q)};c.$5=function(a,b,c,d,e){b=q(b,c);c=babelHelpers["extends"]({},b,{id:e});b=m(d,c,{});e=j(this.$1,b);d=a.prepare(b,e);return{requestDescriptor:b.request,queryResult:d}};c.$4=function(a){var b=this;Array.isArray(a)?a.forEach(function(a){r(b.$1,a.fieldErrors)}):r(this.$1,a.fieldErrors)};c.readSpec=function(a,b,c){var d={};for(var e in a)d[e]=this.read(a[e],b[e],c,e);return d};c.subscribe=function(a,b){var c=this,d=this.$1,e=a.cacheKey,f=a.snapshot;if(!f)return{dispose:function(){}};a=this.checkMissedUpdates(a);var h=a[0],j=a[1];h&&b();var k=[];Array.isArray(f)?(Array.isArray(j)||g(0,18208),j.forEach(function(a,f){k.push(d.subscribe(a,function(a){var g=d.getStore().getEpoch();c.$7(e,j,a,f,g);b()}))})):(j!=null&&!Array.isArray(j)||g(0,18209),k.push(d.subscribe(j,function(a){var f=d.getStore().getEpoch(),g=A(e,a,f);l.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE&&g.isMissingData?c.$2.set(e,{kind:"missing",result:g,snapshot:a}):c.$2.set(e,{kind:"done",result:A(e,a,f)});b()})));f=(h=(a=this.$3)==null?void 0:a.get(e))!=null?h:void 0;if(f!=null&&f.length){var m=i(this.$1);f.forEach(function(a){k.push(m.retain(a))})}return{dispose:function(){k.forEach(function(a){return a.dispose()}),c.$2["delete"](e)}}};c.subscribeSpec=function(a,b){var c=this,d=Object.keys(a).map(function(d){return c.subscribe(a[d],b)});return{dispose:function(){d.forEach(function(a){a.dispose()})}}};c.checkMissedUpdates=function(a){var b=this.$1,c=a.snapshot;if(!c)return[!1,null];var d=null;d=b.getStore().getEpoch();if(a.storeEpoch===d)return[!1,a.snapshot];a=a.cacheKey;if(Array.isArray(c)){var e=!1,f=[];c.forEach(function(c,d){var g=b.lookup(c.selector);c=c.data;var a=g.data;a=t(c,a);a!==c&&(g=babelHelpers["extends"]({},g,{data:a}),e=!0);f[d]=g});if(e){var g=A(a,f,d);l.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE&&g.isMissingData?this.$2.set(a,{kind:"missing",result:g,snapshot:f}):this.$2.set(a,{kind:"done",result:g})}return[e,f]}g=b.lookup(c.selector);c=c.data;var h=g.data;h=t(c,h);g={data:h,isMissingData:g.isMissingData,missingClientEdges:g.missingClientEdges,missingLiveResolverFields:g.missingLiveResolverFields,seenRecords:g.seenRecords,selector:g.selector,fieldErrors:g.fieldErrors};if(h!==c){d=A(a,g,d);l.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE&&d.isMissingData?this.$2.set(a,{kind:"missing",result:d,snapshot:g}):this.$2.set(a,{kind:"done",result:d})}return[h!==c,g]};c.checkMissedUpdatesSpec=function(a){var b=this;return Object.keys(a).some(function(c){return b.checkMissedUpdates(a[c])[0]})};c.$6=function(a,b,c,d){var e=this;b=o(this.$1,b,c);if(b==null)return null;c=b.promise;b=b.pendingOperations;var f=c.then(function(){e.$2["delete"](a)})["catch"](function(b){e.$2["delete"](a)});f.displayName=c.displayName;this.$2.set(a,{kind:"pending",pendingOperations:b,promise:f,result:d});return{promise:f,pendingOperations:b}};c.$7=function(a,b,c,d,e){var f,g=this.$2.get(a);if(s(g)){D(c.selector.node.name);return}g=g==null||(f=g.result)==null?void 0:f.snapshot;if(g&&!Array.isArray(g)){D(c.selector.node.name);return}g=g?[].concat(g):[].concat(b);g[d]=c;b=A(a,g,e);l.ENABLE_RELAY_OPERATION_TRACKER_SUSPENSE&&b.isMissingData?this.$2.set(a,{kind:"missing",result:b,snapshot:g}):this.$2.set(a,{kind:"done",result:b})};return a}();function D(a){g(0,20347,a)}function E(a){return new C(a)}var F=f?new WeakMap():new Map();function a(a){var b=F.get(a);if(b)return b;b=E(a);F.set(a,b);return b}e.exports={createFragmentResource:E,getFragmentResourceForEnvironment:a}}),null);